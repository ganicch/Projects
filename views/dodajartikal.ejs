<!DOCTYPE html>
<html>
<head>
    <script src="https://kit.fontawesome.com/cd20a3b6e8.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel='stylesheet' href='/stylesheets/dodajartikal.css' />
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<div class="nav-bar">
    <a href="/home"> <img src="/../images/logo.png" class="nav-logo" ></a>
    <ul>
        <a href="/home"><li>Home</li></a>
        <a href="/shop/sho"><li>Shop</li></a>
        <a href="/users/nalog"><li>My account</li></a>
        <a href="/myshop"><li>My Shop</li></a>
        <a href="/shop/dodajartikal" class="active"><li>Add Articles</li></a>
        <a href="/shop/obrisiartikal"><li>Remove Articles</li></a>
        <a href="/shop/narudjbe"><li>Orders</li></a>
    </ul>
    <a class="signout" href="/login/logout"><i class="fas fa-sign-out-alt"></i></a>


</div>
<div class="sve-dodavanje">
    <h1>Kreiranje artikla</h1>
    <!--<form onsubmit="event.preventDefault(); event.stopPropagation(); return false;">-->
    <form method="post" action="/shop/dodajArtikal" enctype="multipart/form-data" >
            <input type="text" name="naslov" class="naslov" id="naslov" placeholder="Naziv artikla">
            <textarea name="opis" placeholder="Opis" class="opis" style="height: 150px"></textarea>
            <input type="text" name="velicina" class="velicina"  placeholder="Velicina Artikla">

            <div class="iznad-dole">
                <div>
                    <input type="number" name="cijena" class="cijena" placeholder="Cijena artikla">
                    <label>KM</label>
                </div>
                <div>
                    <label>Kategorija: </label>
                    <select name="kategorija">
                        <%for (let i=0;i<ispisi.length;i++) {%>
                            <option value="<%=ispisi[i].id%>"><%=ispisi[i].naziv%></option>
                        <%}%>
                    </select>
                </div>
            </div>
                <div class="dole">
                    <div>
                        <label>Ucitajte sliku artikla</label>
                        <input type="file" name="slikaartikla" class="slika" id="filesInput" accept="image/*"/>
                    </div>
                    <!--<button id="submitArticleBtn"  onclick="handleImageUpload()" style="height: 50px; width: 100px">prress</button>-->
                    <input type="submit" id="submitArticleBtn"   value="Press" class="dugme">
                </div>

    </form>
</div>
<!--<script>
    function dugmic(){
        var formidable = require('formidable');
        var fs = require('fs');
        var express = require('express');
        const req = require('express');
        var obj = require('../poolStorage');
        var cloudinary = require('cloudinary').v2
        cloudinary.config({
            cloud_name: 'edin111edin',
            api_key: '815432241273389',
            api_secret: 'ehoAf8N1GrBdQWSALLidtlNWIzE'
        });

        const a = document.getElementById("naslov").value;
        alert(a)
        const form = new formidable.IncomingForm();

        form.parse(req, function (err, fields, files) {
            const path = files.slikaartikla.filepath;
            console.info(path)
            cloudinary.uploader.upload(path,function(error, result) {
                console.info(result)
            });
        });
    }
</script>-->
<script>
    /*function getBase64(file) {
        console.log("hello2")
        var reader = new FileReader();
        reader.readAsDataURL(file);

        reader.onload = function () {
            console.log(reader.result);
            return reader.result;
        };
        reader.onerror = function (error) {
            console.log('Error: ', error);
        };
    }*/

    function handleImageUpload() {

        var file = document.getElementById('filesInput').value;
        console.log(file)
        console.info(JSON.stringify(file))
        $.ajax({
            url: "/shop/dodajArtikal/",
            data: {edin:"sffs"},
            type: 'POST',
            beforeSend: function () {
            }
        }).done(function (data) {
            console.info("nesto")
        });
        //var slika = getBase64(file); // prints the base64 string
        console.log(slika)

        //napravit post request na dodajArtikal
    }
</script>
</body>
</html>
